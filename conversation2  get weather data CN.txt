æ‚¨è¯´ï¼š
æˆ‘è§‰å¾—è¿™ä¸ªæ–¹æ¡ˆå¯ä»¥ï¼Œè¯·å¸®æˆ‘ç”Ÿæˆç¬¬ä¸€ä¸ªæ¨¡å—çš„åˆæ­¥ä»£ç 
ChatGPT è¯´ï¼š
å¥½çš„ï¼Œæˆ‘ä»¬å…ˆç”Ÿæˆç¬¬ä¸€ä¸ªæ¨¡å— weather_dataï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼š

ğŸ“‚ weather_data/fetch.py â€“ è·å–å¤©æ°”æ•°æ®
ğŸ“‚ weather_data/visualise.py â€“ å¯è§†åŒ–æ¸©åº¦ã€é™æ°´æ¦‚ç‡ã€é£é€Ÿ
âœ… weather_data/fetch.py
"""
fetch.py - Module for retrieving weather data from OpenWeatherMap API.
"""

import requests
from config import API_KEY

BASE_URL = "https://api.openweathermap.org/data/2.5/"

def fetch_current_weather(city):
    """
    Fetch current weather data for a given city.
    """
    url = f"{BASE_URL}weather?q={city}&appid={API_KEY}&units=metric"
    response = requests.get(url)
    if response.status_code == 200:
        return response.json()
    else:
        return None

def fetch_forecast_weather(city):
    """
    Fetch 5-day forecast data (3-hour intervals) for a given city.
    """
    url = f"{BASE_URL}forecast?q={city}&appid={API_KEY}&units=metric"
    response = requests.get(url)
    if response.status_code == 200:
        return response.json()
    else:
        return None
âœ… weather_data/visualise.py
"""
visualise.py - Module for visualising weather forecast data.
"""

import matplotlib.pyplot as plt
from datetime import datetime

def plot_temperature_trend(forecast_data, city):
    """
    Plot temperature trend from forecast data.
    """
    times = []
    temps = []

    for entry in forecast_data['list']:
        dt = datetime.strptime(entry['dt_txt'], "%Y-%m-%d %H:%M:%S")
        temp = entry['main']['temp']
        times.append(dt)
        temps.append(temp)

    plt.figure(figsize=(10, 5))
    plt.plot(times, temps, marker='o')
    plt.title(f"Temperature Trend in {city}")
    plt.xlabel("Date & Time")
    plt.ylabel("Temperature (Â°C)")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.grid(True)
    plt.show()

def plot_precipitation_probability(forecast_data, city):
    """
    Plot precipitation probability from forecast data (if available).
    """
    times = []
    pop = []

    for entry in forecast_data['list']:
        dt = datetime.strptime(entry['dt_txt'], "%Y-%m-%d %H:%M:%S")
        prob = entry.get('pop', 0) * 100  # pop is probability of precipitation
        times.append(dt)
        pop.append(prob)

    plt.figure(figsize=(10, 5))
    plt.bar(times, pop)
    plt.title(f"Precipitation Probability in {city}")
    plt.xlabel("Date & Time")
    plt.ylabel("Probability (%)")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.grid(True)
    plt.show()

def plot_wind_speed(forecast_data, city):
    """
    Plot wind speed trend from forecast data.
    """
    times = []
    speeds = []

    for entry in forecast_data['list']:
        dt = datetime.strptime(entry['dt_txt'], "%Y-%m-%d %H:%M:%S")
        speed = entry['wind']['speed']
        times.append(dt)
        speeds.append(speed)

    plt.figure(figsize=(10, 5))
    plt.plot(times, speeds, marker='s', linestyle='--')
    plt.title(f"Wind Speed Forecast in {city}")
    plt.xlabel("Date & Time")
    plt.ylabel("Wind Speed (m/s)")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.grid(True)
    plt.show()
ğŸ› ï¸ ä½ è¿˜éœ€è¦ï¼š
åˆ›å»º config.pyï¼š

API_KEY = "your_openweathermap_api_key"
å®‰è£…ä¾èµ–ï¼š

pip install requests matplotlib
æ˜¯å¦éœ€è¦æˆ‘æ¥ç€å¸®ä½ ç”Ÿæˆä¸‹ä¸€ä¸ªæ¨¡å—ï¼ˆå¦‚è‡ªç„¶è¯­è¨€è§£æ nlp_interfaceï¼‰ï¼Ÿ

æ‚¨è¯´ï¼š
è¯·é—®æˆ‘çš„å…ˆåé¡ºåºåº”è¯¥æ˜¯æ€ä¹ˆæ ·çš„
ChatGPT è¯´ï¼š
ä½ é¡¹ç›®çš„æ¨èå¼€å‘é¡ºåºå¦‚ä¸‹ï¼Œæ¯ä¸€æ­¥éƒ½å»ºç«‹åœ¨å‰ä¸€æ­¥çš„åŸºç¡€ä¹‹ä¸Šï¼Œä»¥ç¡®ä¿æ¨¡å—èƒ½é¡ºåˆ©é›†æˆå’Œæµ‹è¯•ï¼š

âœ… ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸é…ç½®
å®‰è£…æ‰€éœ€åº“ï¼šrequests, matplotlib, pyinputplus

æ–°å»ºé¡¹ç›®ç»“æ„ä¸ç›®å½•

æ·»åŠ  config.py å¹¶å¡«å…¥ä½ çš„ API Key

æµ‹è¯•èƒ½å¦æˆåŠŸä» API è·å–å¤©æ°”æ•°æ®ï¼ˆä½¿ç”¨ fetch_current_weatherï¼‰

âœ… ç¬¬äºŒæ­¥ï¼šå¤©æ°”æ•°æ®æ¨¡å—å¼€å‘
å®Œæˆå¹¶æµ‹è¯•ï¼š

fetch_current_weather() å’Œ fetch_forecast_weather() èƒ½è¿”å›æœ‰æ•ˆæ•°æ®

ä¸‰ä¸ªå¯è§†åŒ–å‡½æ•°èƒ½ç”»å‡ºå›¾è¡¨ï¼ˆæ¸©åº¦ã€é™æ°´ã€é£é€Ÿï¼‰

ç¡®ä¿ fetch å’Œ visualise åˆ†å¼€ã€å¯å¤ç”¨ã€æ¨¡å—åŒ–è‰¯å¥½

ğŸ”„ ç¬¬ä¸‰æ­¥ï¼šè‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å—å¼€å‘ï¼ˆnlp_interfaceï¼‰
åˆ›å»º parser.pyï¼š

åˆ†æç”¨æˆ·çš„é—®é¢˜ï¼Œå¦‚â€œDo I need an umbrella tomorrow?â€

æŠ½å–å…³é”®è¯ â†’ è½¬æ¢ä¸ºæŸ¥è¯¢æŒ‡ä»¤ï¼ˆä½ç½® + å¤©æ°”ç±»å‹ï¼‰

åˆ›å»º responder.pyï¼š

æ ¹æ® parser æå–å‡ºçš„æ„å›¾å’Œ API æ•°æ®ç”Ÿæˆè‹±æ–‡å“åº”

æ¨¡æ‹Ÿè‡ªç„¶è¯­è¨€ï¼ˆæ— éœ€GPTï¼Œä½¿ç”¨æ¡ä»¶åˆ¤æ–­å’Œæ¨¡æ¿è¯­å¥ï¼‰

ğŸ”˜ ç¬¬å››æ­¥ï¼šç”¨æˆ·ç•Œé¢æ¨¡å—å¼€å‘ï¼ˆuiï¼‰
åˆ›å»º menu.py ä½¿ç”¨ pyinputplus å®ç°ï¼š

ä¸»èœå•ï¼ˆé€‰æ‹©åŠŸèƒ½ï¼‰

å­èœå•ï¼ˆè¾“å…¥åŸå¸‚ã€æ—¥æœŸã€æé—®ï¼‰

åˆ›å»º display.py æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ

æ ¼å¼åŒ–è¾“å‡ºå¤©æ°”æ•°æ®

è¾“å‡ºé”™è¯¯æç¤ºæˆ–ç”¨æˆ·è¯´æ˜

ğŸ” ç¬¬äº”æ­¥ï¼šä¸»ç¨‹åºæ•´åˆï¼ˆmain.pyï¼‰
ä¸»èœå•è°ƒç”¨å¤©æ°”æŸ¥è¯¢ã€å›¾è¡¨æ˜¾ç¤ºã€è‡ªç„¶è¯­è¨€å¯¹è¯åŠŸèƒ½

æ§åˆ¶ç¨‹åºæµç¨‹

åŠ å…¥å¼‚å¸¸å¤„ç†å’Œæ¸…æ™°æç¤º

ğŸ¯ ç¬¬å…­æ­¥ï¼šæµ‹è¯•ä¸ä¼˜åŒ–
æ£€æŸ¥æ¯ä¸ªæ¨¡å—æ˜¯å¦èƒ½å•ç‹¬è¿è¡Œ

éªŒè¯æ•´ä½“é›†æˆæ˜¯å¦ç¨³å®š

åŠ å…¥æ³¨é‡Šã€æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰

å¯é€‰ï¼šåŠ å…¥æ—¥å¿—è®°å½•ã€é”™è¯¯è¿½è¸ªç­‰

ä½ æ˜¯å¦å¸Œæœ›æˆ‘ä¸ºä½ åˆ—å‡ºä¸€ä¸ªå¯¹åº”çš„æ–‡ä»¶å¼€å‘é¡ºåºæ¸…å• + å®ŒæˆçŠ¶æ€æ£€æŸ¥è¡¨ï¼Ÿ

æ‚¨è¯´ï¼š
å·²ä¸Šä¼ çš„å›¾ç‰‡
è¯·é—®è¾“å‡ºå†…å®¹æ˜¯è¿™ç§å½¢å¼ä»£ç ä»£ç è¿è¡Œæ˜¯å¦æ­£ç¡®
ChatGPT è¯´ï¼š
æ˜¯çš„ï¼Œè¿™ç§è¾“å‡ºè¯´æ˜ ä»£ç è¿è¡Œæ­£å¸¸ä¸”ç¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªï¼Œè§£é‡Šå¦‚ä¸‹ï¼š

âœ… è¾“å‡ºè§£é‡Šï¼š
ä½ è¿è¡Œäº†å¦‚ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š

pip install requests matplotlib
è€Œç³»ç»Ÿè¿”å›ï¼š

Requirement already satisfied: ...
è¿™è¡¨ç¤ºï¼š

requests å’Œ matplotlib ç­‰ä¾èµ–å·²ç»æˆåŠŸå®‰è£…ã€‚

æ‰€æœ‰ä¾èµ–åº“éƒ½å·²ç»å­˜åœ¨äºä½ å½“å‰çš„ Python ç¯å¢ƒä¸­ï¼ˆå¦‚ /usr/local/lib/python3.11/...ï¼‰

âœ… ä¸‹ä¸€æ­¥å¯ä»¥ç»§ç»­ï¼š
ä½ ç°åœ¨å¯ä»¥æ”¾å¿ƒå¼€å§‹å¼€å‘å¤©æ°”æ•°æ®æ¨¡å—ï¼ŒåŒ…æ‹¬ï¼š

ç¼–å†™ fetch.py æŠ“å–å¤©æ°”æ•°æ®

ç¼–å†™ visualise.py å®ç°å›¾è¡¨å±•ç¤ºåŠŸèƒ½

å¦‚æœä½ å·²ç»å†™å¥½ fetch_current_weather(city)ï¼Œä½ å¯ä»¥å°è¯•å¦‚ä¸‹ä»£ç æµ‹è¯•å®ƒæ˜¯å¦æ­£å¸¸è¿”å›æ•°æ®ï¼š

from weather_data.fetch import fetch_current_weather

data = fetch_current_weather("Perth")
print(data)
å¦‚æœè¾“å‡ºä¸ºä¸€ä¸ªå­—å…¸ï¼ˆåŒ…å«å¤©æ°”æè¿°ã€æ°”æ¸©ç­‰ï¼‰ï¼Œè¯´æ˜ä½ çš„ API è°ƒç”¨ä¹Ÿæ­£å¸¸ã€‚

æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä»½ç®€å•çš„æµ‹è¯•è„šæœ¬æ¥æ£€æŸ¥ fetch.py æ˜¯å¦å·¥ä½œï¼Ÿ

æ‚¨è¯´ï¼š
å¯ä»¥
ChatGPT è¯´ï¼š
ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•è„šæœ¬ test_fetch.pyï¼Œç”¨äºéªŒè¯ fetch.py æ¨¡å—ä¸­çš„å‡½æ•°æ˜¯å¦èƒ½æ­£ç¡®è·å–å¤©æ°”æ•°æ®ï¼š

âœ… test_fetch.py
"""
test_fetch.py - Simple test script for fetch_current_weather and fetch_forecast_weather.
"""

from weather_data.fetch import fetch_current_weather, fetch_forecast_weather

def test_fetch_weather():
    city = "Perth"

    print("ğŸ” æ­£åœ¨æµ‹è¯•å½“å‰å¤©æ°”æ•°æ®...")
    current = fetch_current_weather(city)
    if current:
        print("âœ… å½“å‰å¤©æ°”è·å–æˆåŠŸï¼")
        print(f"åŸå¸‚: {current['name']}")
        print(f"å¤©æ°”: {current['weather'][0]['description']}")
        print(f"æ¸©åº¦: {current['main']['temp']}Â°C")
    else:
        print("âŒ å½“å‰å¤©æ°”è·å–å¤±è´¥")

    print("\nğŸ” æ­£åœ¨æµ‹è¯•å¤©æ°”é¢„æŠ¥æ•°æ®...")
    forecast = fetch_forecast_weather(city)
    if forecast:
        print("âœ… å¤©æ°”é¢„æŠ¥è·å–æˆåŠŸï¼")
        print(f"å…±æœ‰ {len(forecast['list'])} æ¡æ•°æ®")
        print(f"ç¬¬ä¸€æ¡æ—¶é—´: {forecast['list'][0]['dt_txt']}")
        print(f"é¢„æµ‹æ¸©åº¦: {forecast['list'][0]['main']['temp']}Â°C")
    else:
        print("âŒ å¤©æ°”é¢„æŠ¥è·å–å¤±è´¥")

if __name__ == "__main__":
    test_fetch_weather()
ğŸ“ ä½¿ç”¨è¯´æ˜ï¼š
å°†è¿™æ®µä»£ç ä¿å­˜ä¸º test_fetch.py

ç¡®ä¿ config.py ä¸­å·²æ­£ç¡®å¡«å†™ API Keyï¼š

API_KEY = "your_openweathermap_api_key"
æ‰§è¡Œæµ‹è¯•ï¼š

python test_fetch.py
å¦‚æœä½ çœ‹åˆ°â€œâœ… å½“å‰å¤©æ°”è·å–æˆåŠŸï¼â€å’Œâ€œâœ… å¤©æ°”é¢„æŠ¥è·å–æˆåŠŸï¼â€ï¼Œè¯´æ˜ fetch.py æ¨¡å—å®Œå…¨æ­£å¸¸ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è¿›å…¥å¯è§†åŒ–æ¨¡å—æˆ–è‡ªç„¶è¯­è¨€æ¨¡å—å¼€å‘ã€‚

æ˜¯å¦è¦æˆ‘ç°åœ¨å¸®ä½ æ­å»º nlp_interface/parser.pyï¼Ÿ

æ‚¨è¯´ï¼š
å¯ä»¥æŠŠè¿™æ®µä»£ç å…¨å˜è‹±æ–‡å—
ChatGPT è¯´ï¼š
å½“ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯ å…¨è‹±æ–‡ç‰ˆ çš„ test_fetch.pyï¼Œæ³¨é‡Šä¸è¾“å‡ºæç¤ºå…¨éƒ¨å·²ç¿»è¯‘ï¼š

âœ… test_fetch.py (English Version)
"""
test_fetch.py - Simple test script for fetch_current_weather and fetch_forecast_weather.
"""

from weather_data.fetch import fetch_current_weather, fetch_forecast_weather

def test_fetch_weather():
    city = "Perth"

    print("ğŸ” Testing current weather data...")
    current = fetch_current_weather(city)
    if current:
        print("âœ… Current weather fetched successfully!")
        print(f"City: {current['name']}")
        print(f"Condition: {current['weather'][0]['description']}")
        print(f"Temperature: {current['main']['temp']}Â°C")
    else:
        print("âŒ Failed to fetch current weather.")

    print("\nğŸ” Testing forecast weather data...")
    forecast = fetch_forecast_weather(city)
    if forecast:
        print("âœ… Forecast data fetched successfully!")
        print(f"Total data points: {len(forecast['list'])}")
        print(f"First timestamp: {forecast['list'][0]['dt_txt']}")
        print(f"Predicted temperature: {forecast['list'][0]['main']['temp']}Â°C")
    else:
        print("âŒ Failed to fetch forecast weather.")

if __name__ == "__main__":
    test_fetch_weather()
âœ… å¦‚æœä½ è¿è¡Œåçœ‹åˆ° âœ… Current weather fetched successfully! å’Œ âœ… Forecast data fetched successfully!ï¼Œè¯´æ˜ä½ çš„ fetch.py æ¨¡å—å·¥ä½œæ­£å¸¸ã€‚

æ˜¯å¦ç»§ç»­è¿›å…¥ä¸‹ä¸€ä¸ªæ¨¡å—ï¼šnlp_interface/parser.pyï¼Ÿæˆ‘å¯ä»¥å¸®ä½ å†™å‡ºè‹±æ–‡æ³¨é‡Šç‰ˆæœ¬çš„åŸºç¡€æ„å›¾åˆ†æä»£ç ã€‚

æ‚¨è¯´ï¼š
å…ˆä¸ç”¨æµ‹è¯•äº†
ChatGPT è¯´ï¼š
å¥½çš„ï¼Œæ˜ç™½äº† âœ…
æˆ‘ä»¬å·²å®Œæˆï¼š

âœ… é¡¹ç›®æ–¹æ¡ˆç¡®è®¤

âœ… å®‰è£…ä¾èµ– & æ£€æŸ¥æˆåŠŸ

âœ… weather_data æ¨¡å—ï¼ˆfetch.py, visualise.pyï¼‰å·²å‡†å¤‡å°±ç»ª

âœ… å¯é€‰æµ‹è¯•è„šæœ¬æä¾›å®Œæ¯•

æ¥ä¸‹æ¥ï¼Œå¦‚æœä½ éœ€è¦ç»§ç»­å¼€å‘ä¸‹ä¸€æ¨¡å—ï¼ˆå¦‚è‡ªç„¶è¯­è¨€å¤„ç† nlp_interfaceã€èœå•äº¤äº’ ui/menu.pyã€æˆ–è€…ä¸»ç¨‹åº main.pyï¼‰ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šç»§ç»­ä¸ºä½ ç”Ÿæˆç»“æ„æ¸…æ™°ã€è‹±æ–‡æ³¨é‡Šã€æ¨¡å—åŒ–çš„ä»£ç ã€‚

éœ€è¦æˆ‘å¸®ä½ è§„åˆ’ä¸‹ä¸€é˜¶æ®µå·¥ä½œæˆ–ç«‹å³è¿›å…¥ä»£ç å¼€å‘å—ï¼Ÿ

æ‚¨è¯´ï¼š
è¯·é—®3ç§å¯è§†åŒ–ï¼šæ¸©åº¦è¶‹åŠ¿ã€é™æ°´æ¦‚ç‡ã€é£é€Ÿæ˜¯å¦ä¹ŸåŒ…å«å…¶ä¸­å‘¢
ChatGPT è¯´ï¼š
æ˜¯çš„ï¼Œé‚£3ç§å¯è§†åŒ–åŠŸèƒ½å·²ç»åŒ…å«åœ¨ä½ ç°æœ‰çš„ weather_data/visualise.py æ¨¡å—ä¸­ï¼Œå¹¶ä¸”åˆ†åˆ«é€šè¿‡ä»¥ä¸‹å‡½æ•°å®ç°ï¼š

âœ… å¯è§†åŒ–åŠŸèƒ½ä¸€è§ˆ
å¯è§†åŒ–ç±»å‹	å‡½æ•°å	å›¾è¡¨ç±»å‹	æ•°æ®æ¥æºå­—æ®µ
ğŸŒ¡ï¸ æ¸©åº¦è¶‹åŠ¿	plot_temperature_trend()	æŠ˜çº¿å›¾	entry['main']['temp']
ğŸŒ§ï¸ é™æ°´æ¦‚ç‡ï¼ˆPOPï¼‰	plot_precipitation_probability()	æ¡å½¢å›¾	entry.get('pop', 0)
ğŸŒ¬ï¸ é£é€Ÿè¶‹åŠ¿	plot_wind_speed()	æŠ˜çº¿å›¾æˆ–è™šçº¿å›¾	entry['wind']['speed']
ğŸ“ æ‰€åœ¨æ–‡ä»¶
æ‰€æœ‰è¿™ä¸‰ä¸ªå‡½æ•°éƒ½é›†ä¸­åœ¨ï¼š

weather_data/visualise.py
ä½ åªéœ€è¦è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œä¼ å…¥ forecast_data å’Œ city å³å¯æ˜¾ç¤ºå›¾è¡¨ï¼Œä¾‹å¦‚ï¼š

from weather_data.visualise import plot_temperature_trend
plot_temperature_trend(forecast_data, "Perth")
å¦‚æœä½ å¸Œæœ›è¿™äº›å›¾è¡¨èƒ½ç›´æ¥é€šè¿‡èœå•é€‰é¡¹ç”Ÿæˆï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä¸ªäº¤äº’å¼ç•Œé¢ï¼ˆå¦‚ ui/menu.pyï¼‰æ¥é€‰æ‹©è¦å±•ç¤ºçš„å›¾è¡¨ã€‚

æ˜¯å¦éœ€è¦æˆ‘ç»§ç»­ä¸ºä½ æ„å»º èœå•ç³»ç»Ÿï¼Ÿï¼ˆåŒ…å«ï¼šå½“å‰å¤©æ°”ã€ä¸‰ç§å›¾è¡¨ã€è‡ªç„¶è¯­è¨€å¯¹è¯ï¼‰